В рамках конкурсного задания необходимо реализовать систему
«Безопасное дорожное движение», которая позволяет оформлять страхование
автомобилей, оформлять страховые выплаты, а также своевременно уплачивать
штрафы при нарушении правил дорожного движения (ПДД).

В систему Безопасного дорожного движения вовлечены следующие
субъекты:
    водитель,
    сотрудник дорожно-патрульной службы (ДПС),
    страховая компания,
    государственный банк.

Объектом системы является транспортное средство.
    Характеристики транспортного средства:
        • Категория (A, B, C);
        • Рыночная стоимость (Рс, eth);
        • Срок эксплуатации (Сэ, лет);
    Характеристики водителя:
        • ФИО
        • Водительское удостоверение со всеми параметрами (номер, срок
        действия, категория транспортного средства);
        • Год начала водительского стажа (для определения стажа; например,
        если стаж начался в 2001 году, то на 2020 год стаж будет равен 19
        лет);
        • Количество ДТП;
        • Количество неоплаченных штрафов;
        • Страховой взнос;
        • Текущий баланс.

Банк в рамках задания – это аккаунт в блокчейн-цепи, который задается в
генезис-блоке. При старте системы на счету данного аккаунта должно быть 1000
eth.
На счет данного аккаунта поступают все штрафы, оплачиваемые водителями.
Также Страховая компания занимает (автоматически) деньги у аккаунта Банк
(без процентов), если ей не хватает денег на выплату страховки. И возвращает
деньги (автоматически) при поступлении денег на счет Страховой компании.

Страховая компания – это аккаунт в блокчейн-цепи, который задается в
генезис-блоке. При старте системы на счету данного аккаунта должно быть 0 eth.

3 of 12Страховая компания может выполнять две функции: оформлять страховку и
выплачивать страховку.

При поступлении запроса от водителя на оформление страховки страховой
взнос уплачивается, исходя из формулы:

                                                СтрВзн = Рс*Сэ/10 + 2*Штр+ДТП-2*Вс (token),
Где
СтрВзн – страховой взнос,
Рс – рыночная стоимость транспортного средства, 
Сэ – срок эксплуатации транспортного средства,
Штр – количество неоплаченных штрафов у водителя,
ДТП – общее количество ДТП, в которые попадал водитель
Вс – Водительский стаж.

Например, водитель с водительским стажем 5 лет, у которого было
зафиксировано 1 ДТП и имеется 2 неоплаченных штрафа для машины
стоимостью 30 eht и сроком эксплуатации 2 года, страховая сумма составит:
При наступлении страхового случая (то есть при оформлении ДТП сотрудником
ДПС, владельцу автомашины возмещается десятикратный размер страхового
взноса).

В системе есть две основные роли пользователей: водитель и сотрудник ДПС. У
каждого из них есть свой личный кабинет. Сотрудник ДПС может также являться
водителем.

Функционал для каждой из ролей в системе:

Водитель:
• добавляет в своем личном кабинете данные водительского
удостоверения: номер, срок действия, категория транспортного
средства (все водительские удостоверения в рамках текущего
конкурсного задания перечислены в табл. 1);

• запрос на регистрацию транспортного средства;

• запрос на продление срока действия водительского удостоверения;

• оформление и получение страховки;

• оплата штрафа.

Сотрудник ДПС:
• подтверждает данные водительского удостоверения (функция
может быть реализована автоматически);

• регистрирует транспортное средство (функция может быть
реализована автоматически);

• продлевает срок прав (функция может быть реализована
автоматически);

• выписывает штраф;

• делает отметку о ДТП.

Таблица 1 - Водительские удостоверения в рамках текущего конкурсного
задания

Номер

Срок действия

Категория

000
11.01.2021
A

111
12.05.2025
B

222
09.09.2020
C

333
13.02.2027
A

444
10.09.2020
B

555
24.06.2029
C

666
31.03.2030
A

Пояснение функционала.
При старте в системе должны быть зарегистрированы:
✓ аккаунт Банка (1000 eth на счету);

✓ аккаунт Страховой компании (0 eth на счету);

✓ 1 сотрудник ДПС он же Водитель 1 Иванов Иван Иванович (без
указания водительского удостоверения и транспортного средства, водительский
стаж 2 года, 0 ДТП, 0 неоплаченных штрафов, страховой взнос не оплачен, на
счету 50 eth).

✓ Водитель 2 Семенов Семен Семенович (без указания водительского
удостоверения и транспортного средства, водительский стаж 5 лет, 0 ДТП, 0
неоплаченных штрафов, страховой взнос не оплачен, на счету 50 eth).

✓ Водитель 3 Петров Петр Петрович (без указания водительского
удостоверения и транспортного средства, водительский стаж 10 лет, 3 ДТП, 0
неоплаченных штрафов, страховой взнос не оплачен, на счету 50 eth).

Остальные пользователи системы
регистрироваться в системе самостоятельно.
должны
иметь
возможность
Добавление водительского удостоверения

Когда водитель добавляет данные водительского удостоверения, запрос на
рассмотрение отправляется в службу ДПС. В службе ДПС производится
проверка, что данное водительское удостоверение есть в базе и все его поля
заполнены правильно.

После этого происходит подтверждение водительского
удостоверения. Если при проверке возникает ошибка, то водителю приходит
соответствующее сообщение об отказе. Предпочтительно выполнение
автоматической проверки.

Регистрация транспортного средства
При запросе на регистрацию транспортного средства, происходит
проверка соответствия категории регистрируемого транспортного средства
категории транспортного средства в водительском удостоверении. Регистрация
производится, если категории совпадают. Если при проверке возникает ошибка,
то водителю приходит соответствующее сообщение об отказе. Предпочтительно
выполнение автоматической проверки.

Продление срока действия водительского удостоверения.
При запросе на продление срока действия водительского удостоверения,
происходит проверка двух параметров:

    ✓ текущая дата должна быть не больше, чем за месяц до окончания срока
    действия удостоверения;

    ✓ у водителя должны быть оплачены все штрафы.

Продление производится, если оба условия выполнены. Если при проверке
возникает ошибка, то водителю приходит соответствующее сообщение об
отказе. Предпочтительно выполнение автоматической проверки.

Оплата штрафа
Водитель имеет возможность оплатить выписанные ему штрафы.
Стоимость одного штрафа 10 eth. Если оплата штрафа производится в первые 5
дней, то стоимость штрафа снижается в 2 раза и составляет 5 eth. ВАЖНО!!!! 1
день в задании = 30 sec реального времени.

Оформление страховки
Водитель может запросить оформление страховки. Стоимость страхового
взноса рассчитывается автоматически. Водителю приходит запрос на
подтверждение оплаты страхового взноса с указанием суммы страхового взноса.
После подтверждения водителем, сумма страховки перечисляется на адрес
Страховой компании.

Оформление штрафа
Сотрудник ДПС может выписать штраф водителю. Штраф выписывается
по номеру водительского удостоверения.

Оформление ДТП
Сотрудник ДПС может сделать отметку о ДТП. Отметка о ДТП делается
по номеру водительского удостоверения. При этом автоматически запускается
процедура страхового покрытия. Если водитель оформил страховку, то он
получает компенсацию.